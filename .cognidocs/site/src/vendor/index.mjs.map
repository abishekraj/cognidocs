{"version":3,"sources":["../src/PreviewRenderer.tsx","../src/ErrorBoundary.tsx","../src/hooks/usePreviewState.ts","../src/utils/propTypeParser.ts","../src/editors/StringEditor.tsx","../src/editors/NumberEditor.tsx","../src/editors/BooleanEditor.tsx","../src/editors/EnumEditor.tsx","../src/editors/ObjectEditor.tsx","../src/editors/ArrayEditor.tsx","../src/PropsEditor.tsx","../src/sandbox/PreviewSandbox.tsx","../src/sandbox/securityPolicies.ts","../src/sandbox/sandboxRuntime.ts","../src/utils/codeGenerator.ts","../src/utils/dependencyResolver.ts","../src/hooks/useComponentLoader.ts"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport type { PreviewMetadata, PreviewState, PreviewError } from '@cognidocs/types';\nimport { ErrorBoundary } from './ErrorBoundary';\n\nexport interface PreviewRendererProps {\n  /** Component metadata for preview */\n  metadata: PreviewMetadata;\n  /** Initial prop values */\n  initialProps?: Record<string, unknown>;\n  /** Callback when props change */\n  onPropsChange?: (props: Record<string, unknown>) => void;\n  /** Callback when error occurs */\n  onError?: (error: PreviewError) => void;\n  /** Custom width for preview container */\n  width?: string | number;\n  /** Custom height for preview container */\n  height?: string | number;\n}\n\n/**\n * PreviewRenderer - Main component for rendering live component previews\n *\n * Features:\n * - Live component rendering with error boundaries\n * - Real-time prop updates\n * - Secure sandboxed execution (to be implemented in Phase 6.3)\n *\n * @example\n * ```tsx\n * <PreviewRenderer\n *   metadata={{\n *     componentName: 'Button',\n *     filePath: '/src/Button.tsx',\n *     props: [{ name: 'variant', type: 'string', required: false }],\n *     dependencies: [],\n *     framework: 'react'\n *   }}\n *   initialProps={{ variant: 'primary' }}\n * />\n * ```\n */\nexport const PreviewRenderer: React.FC<PreviewRendererProps> = ({\n  metadata,\n  initialProps = {},\n  // onPropsChange, // TODO: Will be used in Phase 6.2 with props editor\n  onError,\n  width = '100%',\n  height = '400px',\n}) => {\n  const [state, setState] = useState<PreviewState>({\n    props: initialProps,\n    error: null,\n    loading: false,\n  });\n\n  const handleError = useCallback(\n    (error: PreviewError) => {\n      setState((prev) => ({ ...prev, error: error as Error, loading: false }));\n      if (onError) {\n        onError(error);\n      }\n    },\n    [onError]\n  );\n\n  // TODO: Add updateProps handler in Phase 6.2 when props editor is implemented\n  // This will handle prop updates from the editor UI\n  // const updateProps = useCallback(\n  //   (newProps: Record<string, unknown>) => {\n  //     setState((prev) => ({ ...prev, props: newProps }));\n  //     if (onPropsChange) {\n  //       onPropsChange(newProps);\n  //     }\n  //   },\n  //   [onPropsChange]\n  // );\n\n  return (\n    <div\n      style={{\n        width,\n        height,\n        display: 'flex',\n        flexDirection: 'column',\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Preview Header */}\n      <div\n        style={{\n          padding: '12px 16px',\n          backgroundColor: '#f9fafb',\n          borderBottom: '1px solid #e5e7eb',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}\n      >\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <span style={{ fontSize: '14px', fontWeight: 600, color: '#111827' }}>\n            {metadata.componentName}\n          </span>\n          <span\n            style={{\n              fontSize: '12px',\n              padding: '2px 8px',\n              backgroundColor: '#dbeafe',\n              color: '#1e40af',\n              borderRadius: '4px',\n            }}\n          >\n            {metadata.framework}\n          </span>\n        </div>\n        {state.loading && (\n          <span style={{ fontSize: '12px', color: '#6b7280' }}>Loading...</span>\n        )}\n      </div>\n\n      {/* Preview Content */}\n      <div\n        style={{\n          flex: 1,\n          padding: '20px',\n          backgroundColor: '#fff',\n          overflow: 'auto',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <ErrorBoundary onError={handleError}>\n          {/* Placeholder for component preview */}\n          <div\n            style={{\n              padding: '40px',\n              backgroundColor: '#f9fafb',\n              border: '2px dashed #d1d5db',\n              borderRadius: '8px',\n              textAlign: 'center',\n              color: '#6b7280',\n            }}\n          >\n            <p style={{ margin: 0, fontSize: '14px', fontWeight: 500 }}>\n              Preview Placeholder\n            </p>\n            <p style={{ margin: '8px 0 0 0', fontSize: '12px' }}>\n              Component sandbox will be implemented in Phase 6.3\n            </p>\n            <div style={{ marginTop: '16px', fontSize: '12px', textAlign: 'left' }}>\n              <strong>Current Props:</strong>\n              <pre\n                style={{\n                  marginTop: '8px',\n                  padding: '8px',\n                  backgroundColor: '#fff',\n                  border: '1px solid #e5e7eb',\n                  borderRadius: '4px',\n                  fontSize: '11px',\n                }}\n              >\n                {JSON.stringify(state.props, null, 2)}\n              </pre>\n            </div>\n          </div>\n        </ErrorBoundary>\n      </div>\n    </div>\n  );\n};\n\nexport default PreviewRenderer;\n","import { Component, type ErrorInfo, type ReactNode } from 'react';\nimport type { PreviewError } from '@cognidocs/types';\n\ninterface ErrorBoundaryProps {\n  children: ReactNode;\n  onError?: (error: PreviewError) => void;\n  fallback?: (error: PreviewError) => ReactNode;\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: PreviewError | null;\n}\n\n/**\n * Error boundary component for catching and displaying preview errors\n * Provides detailed error information including stack traces\n */\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return {\n      hasError: true,\n      error: {\n        message: error.message,\n        stack: error.stack,\n      },\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    const previewError: PreviewError = {\n      message: error.message,\n      stack: error.stack,\n    };\n\n    console.error('Preview Error:', error, errorInfo);\n\n    if (this.props.onError) {\n      this.props.onError(previewError);\n    }\n  }\n\n  render(): ReactNode {\n    if (this.state.hasError && this.state.error) {\n      if (this.props.fallback) {\n        return this.props.fallback(this.state.error);\n      }\n\n      return (\n        <div\n          style={{\n            padding: '20px',\n            backgroundColor: '#fee',\n            border: '1px solid #fcc',\n            borderRadius: '4px',\n            color: '#c00',\n          }}\n        >\n          <h3 style={{ margin: '0 0 10px 0', fontSize: '16px', fontWeight: 600 }}>\n            Preview Error\n          </h3>\n          <p style={{ margin: '0 0 10px 0', fontSize: '14px' }}>\n            {this.state.error.message}\n          </p>\n          {this.state.error.stack && (\n            <details style={{ fontSize: '12px', marginTop: '10px' }}>\n              <summary style={{ cursor: 'pointer', fontWeight: 500 }}>\n                Stack Trace\n              </summary>\n              <pre\n                style={{\n                  marginTop: '10px',\n                  padding: '10px',\n                  backgroundColor: '#fff',\n                  border: '1px solid #ddd',\n                  borderRadius: '4px',\n                  overflow: 'auto',\n                  fontSize: '11px',\n                }}\n              >\n                {this.state.error.stack}\n              </pre>\n            </details>\n          )}\n          <button\n            onClick={() => this.setState({ hasError: false, error: null })}\n            style={{\n              marginTop: '15px',\n              padding: '8px 16px',\n              backgroundColor: '#c00',\n              color: '#fff',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              fontSize: '14px',\n            }}\n          >\n            Reset Preview\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","import { useState, useCallback } from 'react';\nimport type { PropertyMetadata } from '@cognidocs/types';\nimport { propertyToPropEditorConfig, parseDefaultValue } from '../utils/propTypeParser';\n\nexport interface PropValue {\n  value: unknown;\n  error?: string;\n}\n\nexport interface PreviewStateHook {\n  /** Current prop values */\n  propValues: Record<string, PropValue>;\n  /** Update a single prop value */\n  updateProp: (name: string, value: unknown) => void;\n  /** Update multiple props at once */\n  updateProps: (props: Record<string, unknown>) => void;\n  /** Reset all props to defaults */\n  resetProps: () => void;\n  /** Get flattened prop values (without errors) */\n  getValues: () => Record<string, unknown>;\n  /** Check if there are any validation errors */\n  hasErrors: () => boolean;\n}\n\n/**\n * Hook for managing preview prop state\n *\n * @param props - Array of PropertyMetadata from parser\n * @param initialValues - Optional initial values for props\n * @returns PreviewStateHook\n */\nexport function usePreviewState(\n  props: PropertyMetadata[],\n  initialValues?: Record<string, unknown>\n): PreviewStateHook {\n  // Initialize prop values with defaults\n  const getInitialState = useCallback(() => {\n    const state: Record<string, PropValue> = {};\n\n    props.forEach((prop) => {\n      const config = propertyToPropEditorConfig(prop);\n      const initialValue = initialValues?.[prop.name];\n      const defaultValue = parseDefaultValue(prop.defaultValue, config.type);\n\n      state[prop.name] = {\n        value: initialValue ?? defaultValue,\n        error: undefined,\n      };\n    });\n\n    return state;\n  }, [props, initialValues]);\n\n  const [propValues, setPropValues] = useState<Record<string, PropValue>>(getInitialState);\n\n  // Update a single prop\n  const updateProp = useCallback((name: string, value: unknown) => {\n    setPropValues((prev) => ({\n      ...prev,\n      [name]: {\n        value,\n        error: undefined, // Clear error on update\n      },\n    }));\n  }, []);\n\n  // Update multiple props\n  const updateProps = useCallback((newProps: Record<string, unknown>) => {\n    setPropValues((prev) => {\n      const updated = { ...prev };\n      Object.entries(newProps).forEach(([name, value]) => {\n        updated[name] = {\n          value,\n          error: undefined,\n        };\n      });\n      return updated;\n    });\n  }, []);\n\n  // Reset to defaults\n  const resetProps = useCallback(() => {\n    setPropValues(getInitialState());\n  }, [getInitialState]);\n\n  // Get values without errors\n  const getValues = useCallback(() => {\n    const values: Record<string, unknown> = {};\n    Object.entries(propValues).forEach(([name, propValue]) => {\n      values[name] = propValue.value;\n    });\n    return values;\n  }, [propValues]);\n\n  // Check for errors\n  const hasErrors = useCallback(() => {\n    return Object.values(propValues).some((propValue) => !!propValue.error);\n  }, [propValues]);\n\n  return {\n    propValues,\n    updateProp,\n    updateProps,\n    resetProps,\n    getValues,\n    hasErrors,\n  };\n}\n","import type { PropEditorType, PropEditorConfig, PropertyMetadata } from '@cognidocs/types';\n\n/**\n * Parse TypeScript type string to determine the appropriate editor type\n *\n * @param typeString - TypeScript type as string (e.g., \"string\", \"'primary' | 'secondary'\", \"number\")\n * @returns PropEditorType\n */\nexport function parseTypeString(typeString: string | undefined): PropEditorType {\n  if (!typeString) {\n    return 'string';\n  }\n\n  const normalized = typeString.trim();\n\n  // Check for React node types\n  if (\n    normalized.includes('React.ReactNode') ||\n    normalized.includes('ReactNode') ||\n    normalized.includes('JSX.Element')\n  ) {\n    return 'react-node';\n  }\n\n  // Check for function types\n  if (\n    normalized.includes('=>') ||\n    normalized.startsWith('(') ||\n    normalized.includes('Function')\n  ) {\n    return 'function';\n  }\n\n  // Check for array types\n  if (normalized.endsWith('[]') || normalized.startsWith('Array<')) {\n    return 'array';\n  }\n\n  // Check for union types (enums)\n  if (normalized.includes('|')) {\n    return 'enum';\n  }\n\n  // Check for object/interface types\n  if (normalized.startsWith('{') || normalized.startsWith('interface')) {\n    return 'object';\n  }\n\n  // Primitive types\n  if (normalized === 'string') return 'string';\n  if (normalized === 'number') return 'number';\n  if (normalized === 'boolean') return 'boolean';\n\n  // Default to string for unknown types\n  return 'string';\n}\n\n/**\n * Extract enum values from union type string\n *\n * @param typeString - Union type string (e.g., \"'primary' | 'secondary' | 'danger'\")\n * @returns Array of enum values\n */\nexport function extractEnumValues(typeString: string): string[] {\n  if (!typeString.includes('|')) {\n    return [];\n  }\n\n  return typeString\n    .split('|')\n    .map((value) => value.trim())\n    .map((value) => {\n      // Remove quotes from string literals\n      if ((value.startsWith(\"'\") && value.endsWith(\"'\")) ||\n          (value.startsWith('\"') && value.endsWith('\"'))) {\n        return value.slice(1, -1);\n      }\n      return value;\n    })\n    .filter(Boolean);\n}\n\n/**\n * Convert PropertyMetadata to PropEditorConfig\n *\n * @param prop - PropertyMetadata from parser\n * @returns PropEditorConfig for editor rendering\n */\nexport function propertyToPropEditorConfig(prop: PropertyMetadata): PropEditorConfig {\n  const editorType = parseTypeString(prop.type);\n  const enumValues = editorType === 'enum' && prop.type\n    ? extractEnumValues(prop.type)\n    : undefined;\n\n  return {\n    name: prop.name,\n    type: editorType,\n    defaultValue: prop.defaultValue,\n    enumValues,\n    required: prop.required ?? !prop.optional,\n    description: prop.description,\n  };\n}\n\n/**\n * Parse default value string to appropriate type\n *\n * @param defaultValue - Default value as string\n * @param editorType - The editor type\n * @returns Parsed value\n */\nexport function parseDefaultValue(\n  defaultValue: string | undefined,\n  editorType: PropEditorType\n): unknown {\n  if (!defaultValue) {\n    return getDefaultForType(editorType);\n  }\n\n  try {\n    switch (editorType) {\n      case 'boolean':\n        return defaultValue === 'true';\n\n      case 'number':\n        return Number(defaultValue);\n\n      case 'array':\n      case 'object':\n        // Try to parse as JSON\n        return JSON.parse(defaultValue);\n\n      case 'function':\n        // Return function placeholder\n        return undefined;\n\n      case 'react-node':\n        // Return string for React nodes\n        return defaultValue.replace(/['\"]/g, '');\n\n      case 'string':\n      case 'enum':\n      default:\n        // Remove quotes if present\n        return defaultValue.replace(/^['\"]|['\"]$/g, '');\n    }\n  } catch {\n    return getDefaultForType(editorType);\n  }\n}\n\n/**\n * Get default value for a given editor type\n *\n * @param editorType - The editor type\n * @returns Default value\n */\nexport function getDefaultForType(editorType: PropEditorType): unknown {\n  switch (editorType) {\n    case 'string':\n      return '';\n    case 'number':\n      return 0;\n    case 'boolean':\n      return false;\n    case 'enum':\n      return '';\n    case 'array':\n      return [];\n    case 'object':\n      return {};\n    case 'function':\n      return undefined;\n    case 'react-node':\n      return '';\n    default:\n      return '';\n  }\n}\n\n/**\n * Validate prop value against its type\n *\n * @param value - The value to validate\n * @param config - Editor configuration\n * @returns Validation result with error message if invalid\n */\nexport function validatePropValue(\n  value: unknown,\n  config: PropEditorConfig\n): { valid: boolean; error?: string } {\n  // Required field validation\n  if (config.required && (value === undefined || value === null || value === '')) {\n    return { valid: false, error: `${config.name} is required` };\n  }\n\n  // Type-specific validation\n  switch (config.type) {\n    case 'number':\n      if (typeof value === 'string' && value !== '') {\n        const num = Number(value);\n        if (isNaN(num)) {\n          return { valid: false, error: 'Must be a valid number' };\n        }\n      }\n      break;\n\n    case 'enum':\n      if (config.enumValues && value && !config.enumValues.includes(String(value))) {\n        return {\n          valid: false,\n          error: `Must be one of: ${config.enumValues.join(', ')}`\n        };\n      }\n      break;\n\n    case 'array':\n      if (typeof value === 'string') {\n        try {\n          const parsed = JSON.parse(value);\n          if (!Array.isArray(parsed)) {\n            return { valid: false, error: 'Must be a valid JSON array' };\n          }\n        } catch {\n          return { valid: false, error: 'Must be valid JSON' };\n        }\n      }\n      break;\n\n    case 'object':\n      if (typeof value === 'string') {\n        try {\n          JSON.parse(value);\n        } catch {\n          return { valid: false, error: 'Must be valid JSON' };\n        }\n      }\n      break;\n  }\n\n  return { valid: true };\n}\n","import type { PropEditorConfig } from '@cognidocs/types';\n\nexport interface StringEditorProps {\n  config: PropEditorConfig;\n  value: string;\n  onChange: (value: string) => void;\n  error?: string;\n}\n\n/**\n * String input editor component\n */\nexport const StringEditor: React.FC<StringEditorProps> = ({\n  config,\n  value,\n  onChange,\n  error,\n}) => {\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const target = e.target as HTMLInputElement;\n    onChange(target.value);\n  };\n\n  return (\n    <div style={{ marginBottom: '16px' }}>\n      <label\n        htmlFor={`prop-${config.name}`}\n        style={{\n          display: 'block',\n          marginBottom: '6px',\n          fontSize: '13px',\n          fontWeight: 500,\n          color: '#374151',\n        }}\n      >\n        {config.name}\n        {config.required && <span style={{ color: '#ef4444', marginLeft: '4px' }}>*</span>}\n      </label>\n\n      {config.description && (\n        <p style={{ margin: '0 0 8px 0', fontSize: '12px', color: '#6b7280' }}>\n          {config.description}\n        </p>\n      )}\n\n      <input\n        id={`prop-${config.name}`}\n        type=\"text\"\n        value={value || ''}\n        onChange={handleChange}\n        placeholder={config.required ? 'Required' : 'Optional'}\n        style={{\n          width: '100%',\n          padding: '8px 12px',\n          fontSize: '14px',\n          border: error ? '1px solid #ef4444' : '1px solid #d1d5db',\n          borderRadius: '6px',\n          outline: 'none',\n          transition: 'border-color 0.2s',\n        }}\n      />\n\n      {error && (\n        <p style={{ margin: '6px 0 0 0', fontSize: '12px', color: '#ef4444' }}>\n          {error}\n        </p>\n      )}\n    </div>\n  );\n};\n","import type { PropEditorConfig } from '@cognidocs/types';\n\nexport interface NumberEditorProps {\n  config: PropEditorConfig;\n  value: number | string;\n  onChange: (value: number) => void;\n  error?: string;\n}\n\n/**\n * Number input editor component\n */\nexport const NumberEditor: React.FC<NumberEditorProps> = ({\n  config,\n  value,\n  onChange,\n  error,\n}) => {\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const target = e.target as HTMLInputElement;\n    const val = target.value;\n    if (val === '') {\n      onChange(0);\n    } else {\n      const num = Number(val);\n      if (!isNaN(num)) {\n        onChange(num);\n      }\n    }\n  };\n\n  return (\n    <div style={{ marginBottom: '16px' }}>\n      <label\n        htmlFor={`prop-${config.name}`}\n        style={{\n          display: 'block',\n          marginBottom: '6px',\n          fontSize: '13px',\n          fontWeight: 500,\n          color: '#374151',\n        }}\n      >\n        {config.name}\n        {config.required && <span style={{ color: '#ef4444', marginLeft: '4px' }}>*</span>}\n      </label>\n\n      {config.description && (\n        <p style={{ margin: '0 0 8px 0', fontSize: '12px', color: '#6b7280' }}>\n          {config.description}\n        </p>\n      )}\n\n      <input\n        id={`prop-${config.name}`}\n        type=\"number\"\n        value={value}\n        onChange={handleChange}\n        placeholder={config.required ? 'Required' : '0'}\n        style={{\n          width: '100%',\n          padding: '8px 12px',\n          fontSize: '14px',\n          border: error ? '1px solid #ef4444' : '1px solid #d1d5db',\n          borderRadius: '6px',\n          outline: 'none',\n          transition: 'border-color 0.2s',\n        }}\n      />\n\n      {error && (\n        <p style={{ margin: '6px 0 0 0', fontSize: '12px', color: '#ef4444' }}>\n          {error}\n        </p>\n      )}\n    </div>\n  );\n};\n","import type { PropEditorConfig } from '@cognidocs/types';\n\nexport interface BooleanEditorProps {\n  config: PropEditorConfig;\n  value: boolean;\n  onChange: (value: boolean) => void;\n}\n\n/**\n * Boolean checkbox editor component\n */\nexport const BooleanEditor: React.FC<BooleanEditorProps> = ({\n  config,\n  value,\n  onChange,\n}) => {\n  return (\n    <div style={{ marginBottom: '16px' }}>\n      <label\n        htmlFor={`prop-${config.name}`}\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '8px',\n          cursor: 'pointer',\n          fontSize: '13px',\n          fontWeight: 500,\n          color: '#374151',\n        }}\n      >\n        <input\n          id={`prop-${config.name}`}\n          type=\"checkbox\"\n          checked={!!value}\n          onChange={(e) => onChange(e.target.checked)}\n          style={{\n            width: '16px',\n            height: '16px',\n            cursor: 'pointer',\n            accentColor: '#3b82f6',\n          }}\n        />\n        <span>{config.name}</span>\n        {config.required && <span style={{ color: '#ef4444', marginLeft: '-4px' }}>*</span>}\n      </label>\n\n      {config.description && (\n        <p style={{ margin: '6px 0 0 24px', fontSize: '12px', color: '#6b7280' }}>\n          {config.description}\n        </p>\n      )}\n    </div>\n  );\n};\n","import type { PropEditorConfig } from '@cognidocs/types';\n\nexport interface EnumEditorProps {\n  config: PropEditorConfig;\n  value: string;\n  onChange: (value: string) => void;\n  error?: string;\n}\n\n/**\n * Enum/Union type select dropdown editor component\n */\nexport const EnumEditor: React.FC<EnumEditorProps> = ({\n  config,\n  value,\n  onChange,\n  error,\n}) => {\n  const options = config.enumValues || [];\n\n  return (\n    <div style={{ marginBottom: '16px' }}>\n      <label\n        htmlFor={`prop-${config.name}`}\n        style={{\n          display: 'block',\n          marginBottom: '6px',\n          fontSize: '13px',\n          fontWeight: 500,\n          color: '#374151',\n        }}\n      >\n        {config.name}\n        {config.required && <span style={{ color: '#ef4444', marginLeft: '4px' }}>*</span>}\n      </label>\n\n      {config.description && (\n        <p style={{ margin: '0 0 8px 0', fontSize: '12px', color: '#6b7280' }}>\n          {config.description}\n        </p>\n      )}\n\n      <select\n        id={`prop-${config.name}`}\n        value={value || ''}\n        onChange={(e) => onChange(e.target.value)}\n        style={{\n          width: '100%',\n          padding: '8px 12px',\n          fontSize: '14px',\n          border: error ? '1px solid #ef4444' : '1px solid #d1d5db',\n          borderRadius: '6px',\n          outline: 'none',\n          backgroundColor: '#fff',\n          cursor: 'pointer',\n          transition: 'border-color 0.2s',\n        }}\n      >\n        {!config.required && (\n          <option value=\"\">-- Select --</option>\n        )}\n        {options.map((option) => (\n          <option key={option} value={option}>\n            {option}\n          </option>\n        ))}\n      </select>\n\n      {error && (\n        <p style={{ margin: '6px 0 0 0', fontSize: '12px', color: '#ef4444' }}>\n          {error}\n        </p>\n      )}\n\n      {options.length === 0 && (\n        <p style={{ margin: '6px 0 0 0', fontSize: '12px', color: '#f59e0b' }}>\n          No options available\n        </p>\n      )}\n    </div>\n  );\n};\n","import { useState } from 'react';\nimport type { PropEditorConfig } from '@cognidocs/types';\n\nexport interface ObjectEditorProps {\n  config: PropEditorConfig;\n  value: object | string;\n  onChange: (value: object) => void;\n  error?: string;\n}\n\n/**\n * Object/JSON editor component with validation\n */\nexport const ObjectEditor: React.FC<ObjectEditorProps> = ({\n  config,\n  value,\n  onChange,\n  error,\n}) => {\n  const [jsonString, setJsonString] = useState(() =>\n    typeof value === 'string' ? value : JSON.stringify(value, null, 2)\n  );\n  const [parseError, setParseError] = useState<string | undefined>();\n\n  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const newValue = e.target.value;\n    setJsonString(newValue);\n\n    // Try to parse JSON\n    try {\n      const parsed = JSON.parse(newValue);\n      setParseError(undefined);\n      onChange(parsed);\n    } catch (err) {\n      setParseError('Invalid JSON');\n    }\n  };\n\n  const handleFormat = () => {\n    try {\n      const parsed = JSON.parse(jsonString);\n      const formatted = JSON.stringify(parsed, null, 2);\n      setJsonString(formatted);\n      setParseError(undefined);\n      onChange(parsed);\n    } catch {\n      setParseError('Cannot format invalid JSON');\n    }\n  };\n\n  const displayError = error || parseError;\n\n  return (\n    <div style={{ marginBottom: '16px' }}>\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '6px' }}>\n        <label\n          htmlFor={`prop-${config.name}`}\n          style={{\n            fontSize: '13px',\n            fontWeight: 500,\n            color: '#374151',\n          }}\n        >\n          {config.name}\n          {config.required && <span style={{ color: '#ef4444', marginLeft: '4px' }}>*</span>}\n        </label>\n\n        <button\n          type=\"button\"\n          onClick={handleFormat}\n          style={{\n            padding: '4px 8px',\n            fontSize: '11px',\n            backgroundColor: '#f3f4f6',\n            border: '1px solid #d1d5db',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            color: '#374151',\n          }}\n        >\n          Format JSON\n        </button>\n      </div>\n\n      {config.description && (\n        <p style={{ margin: '0 0 8px 0', fontSize: '12px', color: '#6b7280' }}>\n          {config.description}\n        </p>\n      )}\n\n      <textarea\n        id={`prop-${config.name}`}\n        value={jsonString}\n        onChange={handleChange}\n        placeholder='{ \"key\": \"value\" }'\n        rows={6}\n        style={{\n          width: '100%',\n          padding: '8px 12px',\n          fontSize: '13px',\n          fontFamily: 'monospace',\n          border: displayError ? '1px solid #ef4444' : '1px solid #d1d5db',\n          borderRadius: '6px',\n          outline: 'none',\n          resize: 'vertical',\n          transition: 'border-color 0.2s',\n        }}\n      />\n\n      {displayError && (\n        <p style={{ margin: '6px 0 0 0', fontSize: '12px', color: '#ef4444' }}>\n          {displayError}\n        </p>\n      )}\n    </div>\n  );\n};\n","import { useState } from 'react';\nimport type { PropEditorConfig } from '@cognidocs/types';\n\nexport interface ArrayEditorProps {\n  config: PropEditorConfig;\n  value: unknown[] | string;\n  onChange: (value: unknown[]) => void;\n  error?: string;\n}\n\n/**\n * Array editor component with JSON validation\n */\nexport const ArrayEditor: React.FC<ArrayEditorProps> = ({\n  config,\n  value,\n  onChange,\n  error,\n}) => {\n  const [jsonString, setJsonString] = useState(() =>\n    typeof value === 'string' ? value : JSON.stringify(value, null, 2)\n  );\n  const [parseError, setParseError] = useState<string | undefined>();\n\n  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const newValue = e.target.value;\n    setJsonString(newValue);\n\n    // Try to parse JSON array\n    try {\n      const parsed = JSON.parse(newValue);\n      if (!Array.isArray(parsed)) {\n        setParseError('Must be an array');\n        return;\n      }\n      setParseError(undefined);\n      onChange(parsed);\n    } catch (err) {\n      setParseError('Invalid JSON');\n    }\n  };\n\n  const handleFormat = () => {\n    try {\n      const parsed = JSON.parse(jsonString);\n      if (!Array.isArray(parsed)) {\n        setParseError('Must be an array');\n        return;\n      }\n      const formatted = JSON.stringify(parsed, null, 2);\n      setJsonString(formatted);\n      setParseError(undefined);\n      onChange(parsed);\n    } catch {\n      setParseError('Cannot format invalid JSON');\n    }\n  };\n\n  const displayError = error || parseError;\n\n  return (\n    <div style={{ marginBottom: '16px' }}>\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '6px' }}>\n        <label\n          htmlFor={`prop-${config.name}`}\n          style={{\n            fontSize: '13px',\n            fontWeight: 500,\n            color: '#374151',\n          }}\n        >\n          {config.name}\n          {config.required && <span style={{ color: '#ef4444', marginLeft: '4px' }}>*</span>}\n        </label>\n\n        <button\n          type=\"button\"\n          onClick={handleFormat}\n          style={{\n            padding: '4px 8px',\n            fontSize: '11px',\n            backgroundColor: '#f3f4f6',\n            border: '1px solid #d1d5db',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            color: '#374151',\n          }}\n        >\n          Format JSON\n        </button>\n      </div>\n\n      {config.description && (\n        <p style={{ margin: '0 0 8px 0', fontSize: '12px', color: '#6b7280' }}>\n          {config.description}\n        </p>\n      )}\n\n      <textarea\n        id={`prop-${config.name}`}\n        value={jsonString}\n        onChange={handleChange}\n        placeholder='[\"item1\", \"item2\"]'\n        rows={5}\n        style={{\n          width: '100%',\n          padding: '8px 12px',\n          fontSize: '13px',\n          fontFamily: 'monospace',\n          border: displayError ? '1px solid #ef4444' : '1px solid #d1d5db',\n          borderRadius: '6px',\n          outline: 'none',\n          resize: 'vertical',\n          transition: 'border-color 0.2s',\n        }}\n      />\n\n      {displayError && (\n        <p style={{ margin: '6px 0 0 0', fontSize: '12px', color: '#ef4444' }}>\n          {displayError}\n        </p>\n      )}\n    </div>\n  );\n};\n","import type { PropertyMetadata } from '@cognidocs/types';\nimport { usePreviewState } from './hooks/usePreviewState';\nimport { propertyToPropEditorConfig, validatePropValue } from './utils/propTypeParser';\nimport { StringEditor } from './editors/StringEditor';\nimport { NumberEditor } from './editors/NumberEditor';\nimport { BooleanEditor } from './editors/BooleanEditor';\nimport { EnumEditor} from './editors/EnumEditor';\nimport { ObjectEditor } from './editors/ObjectEditor';\nimport { ArrayEditor } from './editors/ArrayEditor';\n\nexport interface PropsEditorProps {\n  /** Props metadata from parser */\n  props: PropertyMetadata[];\n  /** Initial prop values */\n  initialValues?: Record<string, unknown>;\n  /** Callback when props change */\n  onChange?: (props: Record<string, unknown>) => void;\n  /** Callback when reset button clicked */\n  onReset?: () => void;\n}\n\n/**\n * PropsEditor - Main component for editing component props\n *\n * Automatically renders type-appropriate editors based on prop types:\n * - string → Text input\n * - number → Number input\n * - boolean → Checkbox\n * - union types → Select dropdown\n * - object → JSON editor\n * - array → JSON array editor\n *\n * @example\n * ```tsx\n * <PropsEditor\n *   props={[\n *     { name: 'variant', type: \"'primary' | 'secondary'\", required: false },\n *     { name: 'disabled', type: 'boolean', required: false }\n *   ]}\n *   onChange={(values) => console.log(values)}\n * />\n * ```\n */\nexport const PropsEditor: React.FC<PropsEditorProps> = ({\n  props,\n  initialValues,\n  onChange,\n  onReset,\n}) => {\n  const { propValues, updateProp, resetProps, getValues, hasErrors } = usePreviewState(\n    props,\n    initialValues\n  );\n\n  const handlePropChange = (name: string, value: unknown) => {\n    updateProp(name, value);\n    if (onChange) {\n      // Get all values including the new one\n      const allValues = getValues();\n      allValues[name] = value;\n      onChange(allValues);\n    }\n  };\n\n  const handleReset = () => {\n    resetProps();\n    if (onReset) {\n      onReset();\n    }\n    if (onChange) {\n      onChange(getValues());\n    }\n  };\n\n  const renderEditor = (prop: PropertyMetadata) => {\n    const config = propertyToPropEditorConfig(prop);\n    const propValue = propValues[prop.name];\n    const value = propValue?.value;\n    const validation = validatePropValue(value, config);\n    const error = validation.valid ? undefined : validation.error;\n\n    const commonProps = {\n      config,\n      error,\n      onChange: (newValue: unknown) => handlePropChange(prop.name, newValue),\n    };\n\n    switch (config.type) {\n      case 'string':\n        return <StringEditor {...commonProps} value={String(value || '')} />;\n\n      case 'number':\n        return <NumberEditor {...commonProps} value={Number(value || 0)} />;\n\n      case 'boolean':\n        return <BooleanEditor {...commonProps} value={Boolean(value)} />;\n\n      case 'enum':\n        return <EnumEditor {...commonProps} value={String(value || '')} />;\n\n      case 'object':\n        return (\n          <ObjectEditor\n            {...commonProps}\n            value={(value as object) || {}}\n          />\n        );\n\n      case 'array':\n        return (\n          <ArrayEditor\n            {...commonProps}\n            value={(value as unknown[]) || []}\n          />\n        );\n\n      case 'function':\n        return (\n          <div style={{ marginBottom: '16px' }}>\n            <label style={{ fontSize: '13px', fontWeight: 500, color: '#6b7280' }}>\n              {config.name} (function)\n            </label>\n            <p style={{ margin: '6px 0 0 0', fontSize: '12px', color: '#6b7280' }}>\n              Function props are not editable\n            </p>\n          </div>\n        );\n\n      case 'react-node':\n        return <StringEditor {...commonProps} value={String(value || '')} />;\n\n      default:\n        return <StringEditor {...commonProps} value={String(value || '')} />;\n    }\n  };\n\n  if (props.length === 0) {\n    return (\n      <div style={{ padding: '20px', textAlign: 'center', color: '#6b7280' }}>\n        <p style={{ margin: 0, fontSize: '14px' }}>No props to configure</p>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      style={{\n        padding: '16px',\n        backgroundColor: '#fff',\n        borderRadius: '8px',\n        border: '1px solid #e5e7eb',\n        maxHeight: '600px',\n        overflowY: 'auto',\n      }}\n    >\n      {/* Header */}\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '20px' }}>\n        <h3 style={{ margin: 0, fontSize: '16px', fontWeight: 600, color: '#111827' }}>\n          Props\n        </h3>\n        <button\n          type=\"button\"\n          onClick={handleReset}\n          style={{\n            padding: '6px 12px',\n            fontSize: '13px',\n            backgroundColor: '#f3f4f6',\n            border: '1px solid #d1d5db',\n            borderRadius: '6px',\n            cursor: 'pointer',\n            color: '#374151',\n            fontWeight: 500,\n          }}\n        >\n          Reset\n        </button>\n      </div>\n\n      {/* Editors */}\n      <div>\n        {props.map((prop) => (\n          <div key={prop.name}>{renderEditor(prop)}</div>\n        ))}\n      </div>\n\n      {/* Validation Summary */}\n      {hasErrors() && (\n        <div\n          style={{\n            marginTop: '16px',\n            padding: '12px',\n            backgroundColor: '#fef2f2',\n            border: '1px solid #fecaca',\n            borderRadius: '6px',\n          }}\n        >\n          <p style={{ margin: 0, fontSize: '13px', color: '#991b1b', fontWeight: 500 }}>\n            Please fix validation errors above\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PropsEditor;\n","/**\n * PreviewSandbox - Secure iframe-based component preview sandbox\n * Phase 6.3: Sandbox Environment\n */\n\nimport { useEffect, useRef, useState, useCallback } from 'react';\nimport type { SandboxMessage, PreviewError } from '@cognidocs/types';\nimport {\n  generateSandboxHTML,\n  SANDBOX_ATTRIBUTES,\n  EXECUTION_TIMEOUT,\n  validateMessageOrigin,\n} from './securityPolicies';\nimport {\n  generateRuntimeCode,\n  parsePreviewError,\n  isSandboxMessage,\n} from './sandboxRuntime';\n\nexport interface PreviewSandboxProps {\n  /** Component source code to execute */\n  componentCode: string;\n  /** Name of the component to render */\n  componentName: string;\n  /** Props to pass to the component */\n  props: Record<string, unknown>;\n  /** Callback when sandbox is ready */\n  onReady?: () => void;\n  /** Callback when render completes */\n  onRender?: () => void;\n  /** Callback when an error occurs */\n  onError?: (error: PreviewError) => void;\n  /** Height of the sandbox iframe */\n  height?: string;\n  /** Allowed origins for postMessage communication */\n  allowedOrigins?: string[];\n}\n\n/**\n * PreviewSandbox component\n * Renders component code in an isolated, secure iframe environment\n */\nexport const PreviewSandbox: React.FC<PreviewSandboxProps> = ({\n  componentCode,\n  componentName,\n  props,\n  onReady,\n  onRender,\n  onError,\n  height = '400px',\n  allowedOrigins = [],\n}) => {\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const [isReady, setIsReady] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  /**\n   * Handle messages from the sandbox iframe\n   */\n  const handleMessage = useCallback(\n    (event: MessageEvent) => {\n      // Validate message origin for security\n      if (!validateMessageOrigin(event.origin, allowedOrigins)) {\n        console.warn('Rejected message from untrusted origin:', event.origin);\n        return;\n      }\n\n      // Validate message structure\n      if (!isSandboxMessage(event.data)) {\n        return;\n      }\n\n      const message = event.data as SandboxMessage;\n\n      // Clear timeout on any message (sandbox is responsive)\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n\n      switch (message.type) {\n        case 'PREVIEW_READY':\n          setIsReady(true);\n          setHasError(false);\n          onReady?.();\n          break;\n\n        case 'PREVIEW_RENDER':\n          onRender?.();\n          break;\n\n        case 'PREVIEW_ERROR': {\n          const error = parsePreviewError(message.payload);\n          setHasError(true);\n          onError?.(error);\n          break;\n        }\n      }\n    },\n    [allowedOrigins, onReady, onRender, onError]\n  );\n\n  /**\n   * Send props update to the sandbox\n   */\n  const updateProps = useCallback((newProps: Record<string, unknown>) => {\n    if (!iframeRef.current?.contentWindow) {\n      return;\n    }\n\n    const message: SandboxMessage = {\n      type: 'UPDATE_PROPS',\n      payload: newProps,\n    };\n\n    iframeRef.current.contentWindow.postMessage(message, '*');\n  }, []);\n\n  /**\n   * Initialize sandbox iframe\n   */\n  useEffect(() => {\n    // Set up message listener\n    window.addEventListener('message', handleMessage);\n\n    // Set up execution timeout\n    timeoutRef.current = setTimeout(() => {\n      const error: PreviewError = {\n        message: `Component failed to render within ${EXECUTION_TIMEOUT}ms`,\n      };\n      setHasError(true);\n      onError?.(error);\n    }, EXECUTION_TIMEOUT);\n\n    return () => {\n      window.removeEventListener('message', handleMessage);\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [handleMessage, onError]);\n\n  /**\n   * Update props when they change\n   */\n  useEffect(() => {\n    if (isReady && !hasError) {\n      updateProps(props);\n    }\n  }, [props, isReady, hasError, updateProps]);\n\n  /**\n   * Generate sandbox HTML content\n   */\n  const sandboxContent = useCallback(() => {\n    const runtimeCode = generateRuntimeCode(componentCode, componentName, props);\n    return generateSandboxHTML(runtimeCode);\n  }, [componentCode, componentName, props]);\n\n  /**\n   * Create blob URL for iframe src\n   */\n  const iframeSrc = useCallback(() => {\n    const html = sandboxContent();\n    const blob = new Blob([html], { type: 'text/html' });\n    return URL.createObjectURL(blob);\n  }, [sandboxContent]);\n\n  /**\n   * Cleanup blob URL on unmount\n   */\n  useEffect(() => {\n    const src = iframeSrc();\n\n    return () => {\n      URL.revokeObjectURL(src);\n    };\n  }, [iframeSrc]);\n\n  return (\n    <div\n      style={{\n        width: '100%',\n        height,\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        overflow: 'hidden',\n        position: 'relative',\n        backgroundColor: '#fff',\n      }}\n    >\n      {!isReady && !hasError && (\n        <div\n          style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            backgroundColor: '#f9fafb',\n            color: '#6b7280',\n            fontSize: '14px',\n            fontFamily: 'sans-serif',\n          }}\n        >\n          Loading preview...\n        </div>\n      )}\n\n      <iframe\n        ref={iframeRef}\n        src={iframeSrc()}\n        sandbox={SANDBOX_ATTRIBUTES}\n        title=\"Component Preview Sandbox\"\n        style={{\n          width: '100%',\n          height: '100%',\n          border: 'none',\n          display: isReady || hasError ? 'block' : 'none',\n        }}\n      />\n    </div>\n  );\n};\n","/**\n * Security policies for the sandbox iframe\n * Phase 6.3: Sandbox Environment\n */\n\n/**\n * Content Security Policy headers for the sandbox iframe\n * Restricts script execution to inline scripts only (for preview code)\n */\nexport const CSP_POLICY = [\n  \"default-src 'none'\",\n  \"script-src 'unsafe-inline' 'unsafe-eval' https://unpkg.com\", // Allow inline scripts and CDN for React\n  \"style-src 'unsafe-inline'\", // Allow inline styles for component styling\n  \"img-src data: https:\", // Allow data URLs and HTTPS images\n  \"font-src data: https:\", // Allow fonts\n  \"connect-src 'none'\", // No external connections\n].join('; ');\n\n/**\n * Sandbox attributes for the iframe element\n * Restricts iframe capabilities to minimum required for preview\n */\nexport const SANDBOX_ATTRIBUTES = [\n  'allow-scripts', // Required for executing component code\n  'allow-same-origin', // Required for React DOM rendering\n].join(' ');\n\n/**\n * Maximum execution time for preview code (milliseconds)\n */\nexport const EXECUTION_TIMEOUT = 5000; // 5 seconds\n\n/**\n * Generate sandbox iframe HTML with security policies\n */\nexport function generateSandboxHTML(code: string): string {\n  return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"Content-Security-Policy\" content=\"${CSP_POLICY}\">\n  <title>Component Preview</title>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      padding: 16px;\n      background: #ffffff;\n    }\n    #root {\n      width: 100%;\n      height: 100%;\n    }\n    .error-container {\n      padding: 16px;\n      background: #fee;\n      border: 1px solid #fcc;\n      border-radius: 4px;\n      color: #c00;\n      font-family: monospace;\n      font-size: 13px;\n    }\n    .error-title {\n      font-weight: bold;\n      margin-bottom: 8px;\n    }\n  </style>\n</head>\n<body>\n  <div id=\"root\"></div>\n  <script crossorigin src=\"https://unpkg.com/react@18/umd/react.development.js\"></script>\n  <script crossorigin src=\"https://unpkg.com/react-dom@18/umd/react-dom.development.js\"></script>\n  <script>\n    // Sandbox runtime code\n    ${code}\n  </script>\n</body>\n</html>`;\n}\n\n/**\n * Validate that message is from a trusted source\n */\nexport function validateMessageOrigin(origin: string, allowedOrigins: string[]): boolean {\n  // In development, allow localhost\n  if (origin.startsWith('http://localhost') || origin.startsWith('http://127.0.0.1')) {\n    return true;\n  }\n\n  return allowedOrigins.some(allowed => origin === allowed || origin.endsWith(allowed));\n}\n\n/**\n * Sanitize error message to prevent XSS\n */\nexport function sanitizeErrorMessage(message: string): string {\n  return message\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;')\n    .replace(/\\//g, '&#x2F;');\n}\n","/**\n * Sandbox runtime code that executes inside the iframe\n * Handles component rendering and communication with parent window\n * Phase 6.3: Sandbox Environment\n */\n\nimport type { SandboxMessage, PreviewError } from '@cognidocs/types';\n\n/**\n * Generate runtime code that will execute inside the sandbox iframe\n * This code runs in the iframe context, not in the parent window\n */\nexport function generateRuntimeCode(\n  componentCode: string,\n  componentName: string,\n  props: Record<string, unknown>\n): string {\n  return `\n(function() {\n  'use strict';\n\n  // Global error handler\n  window.addEventListener('error', function(event) {\n    sendError({\n      message: event.message,\n      stack: event.error?.stack,\n      line: event.lineno,\n      column: event.colno,\n    });\n    event.preventDefault();\n  });\n\n  window.addEventListener('unhandledrejection', function(event) {\n    sendError({\n      message: 'Unhandled Promise Rejection: ' + event.reason,\n      stack: event.reason?.stack,\n    });\n    event.preventDefault();\n  });\n\n  // Communication with parent window\n  function sendMessage(message) {\n    if (window.parent && window.parent !== window) {\n      window.parent.postMessage(message, '*');\n    }\n  }\n\n  function sendError(error) {\n    sendMessage({\n      type: 'PREVIEW_ERROR',\n      payload: error,\n    });\n  }\n\n  function sendReady() {\n    sendMessage({\n      type: 'PREVIEW_READY',\n      payload: null,\n    });\n  }\n\n  function sendRenderComplete() {\n    sendMessage({\n      type: 'PREVIEW_RENDER',\n      payload: null,\n    });\n  }\n\n  // Listen for prop updates from parent\n  window.addEventListener('message', function(event) {\n    if (event.data && event.data.type === 'UPDATE_PROPS') {\n      try {\n        renderComponent(event.data.payload);\n      } catch (error) {\n        sendError({\n          message: error.message,\n          stack: error.stack,\n        });\n      }\n    }\n  });\n\n  // Component code\n  try {\n    ${componentCode}\n\n    // Get React and ReactDOM from global scope (loaded via CDN)\n    const React = window.React;\n    const ReactDOM = window.ReactDOM;\n\n    if (!React || !ReactDOM) {\n      throw new Error('React libraries not loaded');\n    }\n\n    // Get the component from global scope\n    const Component = window['${componentName}'];\n\n    if (!Component) {\n      throw new Error('Component \"${componentName}\" not found. Make sure it is exported.');\n    }\n\n    // Render function\n    function renderComponent(props) {\n      const root = document.getElementById('root');\n      if (!root) {\n        throw new Error('Root element not found');\n      }\n\n      try {\n        // Clear previous render\n        ReactDOM.unmountComponentAtNode(root);\n\n        // Create element and render\n        const element = React.createElement(Component, props);\n        ReactDOM.render(element, root);\n\n        sendRenderComplete();\n      } catch (error) {\n        // Show error in the preview\n        root.innerHTML = \\`\n          <div class=\"error-container\">\n            <div class=\"error-title\">Render Error:</div>\n            <div>\\${error.message}</div>\n          </div>\n        \\`;\n        throw error;\n      }\n    }\n\n    // Initial render with props\n    const initialProps = ${JSON.stringify(props)};\n    renderComponent(initialProps);\n    sendReady();\n\n  } catch (error) {\n    sendError({\n      message: error.message,\n      stack: error.stack,\n    });\n\n    // Show error in preview\n    const root = document.getElementById('root');\n    if (root) {\n      root.innerHTML = \\`\n        <div class=\"error-container\">\n          <div class=\"error-title\">Component Error:</div>\n          <div>\\${error.message}</div>\n        </div>\n      \\`;\n    }\n  }\n})();\n  `.trim();\n}\n\n/**\n * Parse error from sandbox error payload\n */\nexport function parsePreviewError(payload: unknown): PreviewError {\n  if (typeof payload === 'object' && payload !== null) {\n    const error = payload as Partial<PreviewError>;\n    return {\n      message: error.message || 'Unknown error',\n      stack: error.stack,\n      line: error.line,\n      column: error.column,\n    };\n  }\n\n  return {\n    message: String(payload),\n  };\n}\n\n/**\n * Validate sandbox message structure\n */\nexport function isSandboxMessage(data: unknown): data is SandboxMessage {\n  if (typeof data !== 'object' || data === null) {\n    return false;\n  }\n\n  const msg = data as Partial<SandboxMessage>;\n  const validTypes = ['UPDATE_PROPS', 'PREVIEW_ERROR', 'PREVIEW_READY', 'PREVIEW_RENDER'];\n\n  return typeof msg.type === 'string' && validTypes.includes(msg.type);\n}\n\n/**\n * Create a timeout promise for sandbox execution\n */\nexport function createExecutionTimeout(timeoutMs: number): Promise<never> {\n  return new Promise((_, reject) => {\n    setTimeout(() => {\n      reject(new Error(`Preview execution timed out after ${timeoutMs}ms`));\n    }, timeoutMs);\n  });\n}\n","/**\n * Code generation utilities for component preview\n * Converts component metadata and props into executable JavaScript code\n * Phase 6.4: Code Generation & Dependency Resolution\n */\n\nimport type { PropertyMetadata } from '@cognidocs/types';\n\n/**\n * Convert a prop value to valid JavaScript/JSX code\n */\nexport function propValueToCode(value: unknown): string {\n  // Handle null and undefined\n  if (value === null) return 'null';\n  if (value === undefined) return 'undefined';\n\n  // Handle primitives\n  if (typeof value === 'string') {\n    // Escape special characters\n    const escaped = value\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g, '\\\\\"')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/\\t/g, '\\\\t');\n    return `\"${escaped}\"`;\n  }\n\n  if (typeof value === 'number') {\n    return String(value);\n  }\n\n  if (typeof value === 'boolean') {\n    return String(value);\n  }\n\n  // Handle functions\n  if (typeof value === 'function') {\n    return value.toString();\n  }\n\n  // Handle arrays\n  if (Array.isArray(value)) {\n    const items = value.map((item) => propValueToCode(item)).join(', ');\n    return `[${items}]`;\n  }\n\n  // Handle objects\n  if (typeof value === 'object') {\n    const entries = Object.entries(value)\n      .map(([key, val]) => {\n        const validKey = /^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(key);\n        const keyStr = validKey ? key : `\"${key}\"`;\n        return `${keyStr}: ${propValueToCode(val)}`;\n      })\n      .join(', ');\n    return `{ ${entries} }`;\n  }\n\n  return 'undefined';\n}\n\n/**\n * Generate props object code from prop values\n */\nexport function generatePropsObject(props: Record<string, unknown>): string {\n  if (Object.keys(props).length === 0) {\n    return '{}';\n  }\n\n  const entries = Object.entries(props)\n    .map(([key, value]) => {\n      const validKey = /^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(key);\n      const keyStr = validKey ? key : `\"${key}\"`;\n      const valueStr = propValueToCode(value);\n      return `  ${keyStr}: ${valueStr}`;\n    })\n    .join(',\\n');\n\n  return `{\\n${entries}\\n}`;\n}\n\n/**\n * Generate executable component code with props\n */\nexport function generateComponentCode(\n  componentName: string,\n  componentSource: string\n): string {\n  return `\n// Component source code\n${componentSource}\n\n// Export component to global scope for sandbox\nwindow['${componentName}'] = ${componentName};\n\n// Log for debugging\nconsole.log('Component loaded:', '${componentName}');\n`.trim();\n}\n\n/**\n * Generate complete executable code for sandbox\n * This includes component code, dependencies, and rendering logic\n */\nexport function generateExecutableCode(\n  componentName: string,\n  componentSource: string,\n  dependencies?: string[]\n): string {\n  // Component code\n  let code = generateComponentCode(componentName, componentSource);\n\n  // Add dependency imports if needed\n  if (dependencies && dependencies.length > 0) {\n    const imports = dependencies\n      .map((dep) => `// Dependency: ${dep}`)\n      .join('\\n');\n    code = `${imports}\\n\\n${code}`;\n  }\n\n  return code;\n}\n\n/**\n * Validate component source code\n * Checks for common issues that would prevent execution\n */\nexport function validateComponentSource(source: string, componentName: string): {\n  valid: boolean;\n  errors: string[];\n} {\n  const errors: string[] = [];\n\n  // Check if source is empty\n  if (!source || source.trim().length === 0) {\n    errors.push('Component source code is empty');\n  }\n\n  // Check if component name exists in source\n  const hasComponentDeclaration =\n    source.includes(`function ${componentName}`) ||\n    source.includes(`const ${componentName}`) ||\n    source.includes(`let ${componentName}`) ||\n    source.includes(`class ${componentName}`);\n\n  if (!hasComponentDeclaration) {\n    errors.push(`Component \"${componentName}\" not found in source code`);\n  }\n\n  // Check for export statement\n  const hasExport =\n    source.includes(`export default ${componentName}`) ||\n    source.includes(`export { ${componentName}`) ||\n    source.includes(`export const ${componentName}`) ||\n    source.includes(`export function ${componentName}`) ||\n    source.includes(`export class ${componentName}`);\n\n  if (!hasExport) {\n    errors.push(`Component \"${componentName}\" is not exported`);\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors,\n  };\n}\n\n/**\n * Extract component name from source code\n * Useful when component name is not provided\n */\nexport function extractComponentName(source: string): string | null {\n  // Try to find default export\n  const defaultExportMatch = source.match(/export\\s+default\\s+(\\w+)/);\n  if (defaultExportMatch) {\n    return defaultExportMatch[1];\n  }\n\n  // Try to find named export with function\n  const namedFunctionMatch = source.match(/export\\s+function\\s+(\\w+)/);\n  if (namedFunctionMatch) {\n    return namedFunctionMatch[1];\n  }\n\n  // Try to find named export with const\n  const namedConstMatch = source.match(/export\\s+const\\s+(\\w+)/);\n  if (namedConstMatch) {\n    return namedConstMatch[1];\n  }\n\n  // Try to find named export with class\n  const namedClassMatch = source.match(/export\\s+class\\s+(\\w+)/);\n  if (namedClassMatch) {\n    return namedClassMatch[1];\n  }\n\n  return null;\n}\n\n/**\n * Strip TypeScript types from source code\n * Converts TypeScript to JavaScript for execution\n */\nexport function stripTypeScript(source: string): string {\n  let code = source;\n\n  // Remove type annotations from function parameters\n  code = code.replace(/(\\w+)\\s*:\\s*[\\w<>[\\]|&\\s,{}]+(?=\\s*[,)])/g, '$1');\n\n  // Remove return type annotations\n  code = code.replace(/\\)\\s*:\\s*[\\w<>[\\]|&\\s,{}]+\\s*{/g, ') {');\n  code = code.replace(/\\)\\s*:\\s*[\\w<>[\\]|&\\s,{}]+\\s*=>/g, ') =>');\n\n  // Remove interface declarations\n  code = code.replace(/interface\\s+\\w+\\s*{[^}]*}/g, '');\n\n  // Remove type declarations\n  code = code.replace(/type\\s+\\w+\\s*=\\s*[^;]+;/g, '');\n\n  // Remove generic type parameters\n  code = code.replace(/<[\\w<>[\\]|&\\s,{}]+>/g, '');\n\n  // Remove 'as' type assertions\n  code = code.replace(/\\s+as\\s+[\\w<>[\\]|&\\s,{}]+/g, '');\n\n  // Remove import type statements\n  code = code.replace(/import\\s+type\\s+{[^}]*}\\s+from\\s+['\"][^'\"]+['\"]/g, '');\n\n  return code;\n}\n\n/**\n * Generate mock data for a prop based on its type\n * Useful for generating default props for preview\n */\nexport function generateMockPropValue(prop: PropertyMetadata): unknown {\n  const type = prop.type?.toLowerCase() || 'string';\n\n  if (type.includes('string')) {\n    return prop.defaultValue || 'Sample text';\n  }\n\n  if (type.includes('number')) {\n    return prop.defaultValue !== undefined ? Number(prop.defaultValue) : 42;\n  }\n\n  if (type.includes('boolean') || type.includes('bool')) {\n    return prop.defaultValue !== undefined ? Boolean(prop.defaultValue) : true;\n  }\n\n  if (type.includes('[]') || type.includes('array')) {\n    return [];\n  }\n\n  if (type.includes('object') || type === 'any') {\n    return {};\n  }\n\n  if (type.includes('function') || type.includes('=>')) {\n    return () => console.log('Mock function called');\n  }\n\n  if (type.includes('reactnode') || type.includes('react.reactnode')) {\n    return null;\n  }\n\n  return undefined;\n}\n\n/**\n * Generate all props with default/mock values\n */\nexport function generateDefaultProps(props: PropertyMetadata[]): Record<string, unknown> {\n  const result: Record<string, unknown> = {};\n\n  for (const prop of props) {\n    result[prop.name] = generateMockPropValue(prop);\n  }\n\n  return result;\n}\n","/**\n * Dependency resolution utilities for component preview\n * Handles component imports and external dependencies\n * Phase 6.4: Code Generation & Dependency Resolution\n */\n\n/**\n * Dependency information\n */\nexport interface DependencyInfo {\n  /** Package/module name */\n  name: string;\n  /** Import specifiers (named imports) */\n  specifiers: string[];\n  /** Default import name */\n  defaultImport?: string;\n  /** Namespace import name (import * as X) */\n  namespaceImport?: string;\n  /** Whether this is a relative import */\n  isRelative: boolean;\n  /** Original import statement */\n  raw: string;\n}\n\n/**\n * CDN configuration for external packages\n */\nexport interface CDNConfig {\n  /** Package name */\n  package: string;\n  /** CDN URL template */\n  url: string;\n  /** Global variable name */\n  global: string;\n}\n\n/**\n * Default CDN configurations for common packages\n */\nexport const DEFAULT_CDN_CONFIGS: CDNConfig[] = [\n  {\n    package: 'react',\n    url: 'https://unpkg.com/react@18/umd/react.development.js',\n    global: 'React',\n  },\n  {\n    package: 'react-dom',\n    url: 'https://unpkg.com/react-dom@18/umd/react-dom.development.js',\n    global: 'ReactDOM',\n  },\n  {\n    package: 'prop-types',\n    url: 'https://unpkg.com/prop-types@15/prop-types.js',\n    global: 'PropTypes',\n  },\n];\n\n/**\n * Extract import statements from source code\n */\nexport function extractImports(source: string): DependencyInfo[] {\n  const dependencies: DependencyInfo[] = [];\n  const importRegex = /import\\s+(?:(?:(\\w+)|{([^}]+)}|\\*\\s+as\\s+(\\w+))\\s+from\\s+)?['\"]([^'\"]+)['\"]/g;\n\n  let match;\n  while ((match = importRegex.exec(source)) !== null) {\n    const [raw, defaultImport, namedImports, namespaceImport, packageName] = match;\n\n    const specifiers = namedImports\n      ? namedImports.split(',').map((s) => s.trim().split(/\\s+as\\s+/)[0])\n      : [];\n\n    dependencies.push({\n      name: packageName,\n      specifiers,\n      defaultImport,\n      namespaceImport,\n      isRelative: packageName.startsWith('.') || packageName.startsWith('/'),\n      raw,\n    });\n  }\n\n  return dependencies;\n}\n\n/**\n * Resolve a dependency to a CDN URL\n */\nexport function resolveToCDN(\n  packageName: string,\n  cdnConfigs: CDNConfig[] = DEFAULT_CDN_CONFIGS\n): CDNConfig | null {\n  return cdnConfigs.find((config) => config.package === packageName) || null;\n}\n\n/**\n * Generate script tags for CDN dependencies\n */\nexport function generateCDNScriptTags(dependencies: string[]): string {\n  const scripts: string[] = [];\n\n  for (const dep of dependencies) {\n    const cdn = resolveToCDN(dep);\n    if (cdn) {\n      scripts.push(`<script crossorigin src=\"${cdn.url}\"></script>`);\n    }\n  }\n\n  return scripts.join('\\n');\n}\n\n/**\n * Replace import statements with global variable assignments\n */\nexport function replaceImportsWithGlobals(\n  source: string,\n  cdnConfigs: CDNConfig[] = DEFAULT_CDN_CONFIGS\n): string {\n  let code = source;\n  const imports = extractImports(source);\n\n  for (const imp of imports) {\n    // Skip relative imports (handled separately)\n    if (imp.isRelative) {\n      continue;\n    }\n\n    const cdn = resolveToCDN(imp.name, cdnConfigs);\n    if (!cdn) {\n      // Remove import if no CDN mapping found\n      code = code.replace(imp.raw, `// Unresolved dependency: ${imp.name}`);\n      continue;\n    }\n\n    // Build replacement code\n    const replacements: string[] = [];\n\n    if (imp.defaultImport) {\n      replacements.push(`const ${imp.defaultImport} = window.${cdn.global};`);\n    }\n\n    if (imp.namespaceImport) {\n      replacements.push(`const ${imp.namespaceImport} = window.${cdn.global};`);\n    }\n\n    if (imp.specifiers.length > 0) {\n      const destructure = imp.specifiers.join(', ');\n      replacements.push(`const { ${destructure} } = window.${cdn.global};`);\n    }\n\n    // Replace import statement\n    code = code.replace(imp.raw, replacements.join('\\n'));\n  }\n\n  return code;\n}\n\n/**\n * Check if all dependencies are available\n */\nexport function checkDependencies(dependencies: string[]): {\n  available: string[];\n  missing: string[];\n} {\n  const available: string[] = [];\n  const missing: string[] = [];\n\n  for (const dep of dependencies) {\n    const cdn = resolveToCDN(dep);\n    if (cdn) {\n      available.push(dep);\n    } else {\n      missing.push(dep);\n    }\n  }\n\n  return { available, missing };\n}\n\n/**\n * Generate fallback code for missing dependencies\n */\nexport function generateFallbackCode(missingDeps: string[]): string {\n  return `\n// Missing dependencies: ${missingDeps.join(', ')}\nconsole.warn('The following dependencies are not available:', ${JSON.stringify(missingDeps)});\n\n// Create placeholder objects for missing dependencies\n${missingDeps\n  .map(\n    (dep) => `\nconst ${dep.replace(/[^a-zA-Z0-9]/g, '_')} = {\n  __placeholder__: true,\n  __name__: '${dep}',\n};\n`\n  )\n  .join('\\n')}\n`.trim();\n}\n\n/**\n * Process component source code for sandbox execution\n * Replaces imports with global variables and handles dependencies\n */\nexport function processComponentSource(\n  source: string,\n  cdnConfigs?: CDNConfig[]\n): {\n  processedSource: string;\n  dependencies: DependencyInfo[];\n  missing: string[];\n} {\n  // Extract dependencies\n  const dependencies = extractImports(source);\n\n  // Get external (non-relative) dependencies\n  const externalDeps = dependencies.filter((d) => !d.isRelative).map((d) => d.name);\n\n  // Check which are available\n  const { missing } = checkDependencies(externalDeps);\n\n  // Replace imports with global variables\n  let processedSource = replaceImportsWithGlobals(source, cdnConfigs);\n\n  // Add fallback code for missing dependencies\n  if (missing.length > 0) {\n    processedSource = `${generateFallbackCode(missing)}\\n\\n${processedSource}`;\n  }\n\n  return {\n    processedSource,\n    dependencies,\n    missing,\n  };\n}\n\n/**\n * Bundle multiple component sources together\n * Useful for components that depend on each other\n */\nexport function bundleComponents(\n  components: Array<{ name: string; source: string }>\n): string {\n  const processed = components.map((comp) => {\n    const { processedSource } = processComponentSource(comp.source);\n    return `\n// Component: ${comp.name}\n${processedSource}\n\n// Export to global scope\nwindow['${comp.name}'] = ${comp.name};\n    `.trim();\n  });\n\n  return processed.join('\\n\\n');\n}\n\n/**\n * Resolve relative imports within a project\n * Returns a map of import paths to component names\n */\nexport function resolveRelativeImports(\n  source: string,\n  componentMap: Map<string, string>\n): Map<string, string> {\n  const imports = extractImports(source);\n  const resolved = new Map<string, string>();\n\n  for (const imp of imports) {\n    if (imp.isRelative) {\n      const componentName = componentMap.get(imp.name);\n      if (componentName) {\n        resolved.set(imp.name, componentName);\n      }\n    }\n  }\n\n  return resolved;\n}\n\n/**\n * Get list of required CDN scripts for a component\n */\nexport function getRequiredCDNScripts(source: string): CDNConfig[] {\n  const imports = extractImports(source);\n  const externalDeps = imports.filter((d) => !d.isRelative).map((d) => d.name);\n\n  return externalDeps\n    .map((dep) => resolveToCDN(dep))\n    .filter((cdn): cdn is CDNConfig => cdn !== null);\n}\n","/**\n * useComponentLoader - Hook for loading and processing component source code\n * Phase 6.4: Code Generation & Dependency Resolution\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport type { PreviewMetadata, PreviewError } from '@cognidocs/types';\nimport {\n  validateComponentSource,\n  stripTypeScript,\n  generateDefaultProps,\n  extractComponentName,\n} from '../utils/codeGenerator';\nimport {\n  processComponentSource,\n  checkDependencies,\n  type DependencyInfo,\n} from '../utils/dependencyResolver';\n\nexport interface ComponentLoaderState {\n  /** Processed component source code ready for execution */\n  processedSource: string | null;\n  /** Component name extracted or provided */\n  componentName: string | null;\n  /** Default props generated from metadata */\n  defaultProps: Record<string, unknown>;\n  /** List of dependencies found in source */\n  dependencies: DependencyInfo[];\n  /** List of missing dependencies */\n  missingDependencies: string[];\n  /** Whether component is currently loading */\n  loading: boolean;\n  /** Error that occurred during loading */\n  error: PreviewError | null;\n  /** Whether component is ready for preview */\n  ready: boolean;\n}\n\nexport interface UseComponentLoaderOptions {\n  /** Component metadata */\n  metadata: PreviewMetadata;\n  /** Custom component source (overrides metadata.filePath) */\n  customSource?: string;\n  /** Whether to strip TypeScript types */\n  stripTypes?: boolean;\n  /** Whether to auto-generate default props */\n  autoGenerateProps?: boolean;\n}\n\n/**\n * Hook for loading and processing component source code\n * Handles dependency resolution, TypeScript stripping, and validation\n */\nexport function useComponentLoader(\n  options: UseComponentLoaderOptions\n): ComponentLoaderState & {\n  reload: () => void;\n  setSource: (source: string) => void;\n} {\n  const {\n    metadata,\n    customSource,\n    stripTypes = true,\n    autoGenerateProps = true,\n  } = options;\n\n  const [state, setState] = useState<ComponentLoaderState>({\n    processedSource: null,\n    componentName: null,\n    defaultProps: {},\n    dependencies: [],\n    missingDependencies: [],\n    loading: true,\n    error: null,\n    ready: false,\n  });\n\n  /**\n   * Load and process component source\n   */\n  const loadComponent = useCallback(\n    async (source: string) => {\n      setState((prev) => ({ ...prev, loading: true, error: null }));\n\n      try {\n        // Extract or use provided component name\n        let componentName = metadata.componentName;\n        if (!componentName) {\n          const extracted = extractComponentName(source);\n          if (!extracted) {\n            throw new Error('Could not determine component name from source code');\n          }\n          componentName = extracted;\n        }\n\n        // Validate component source\n        const validation = validateComponentSource(source, componentName);\n        if (!validation.valid) {\n          throw new Error(`Component validation failed:\\n${validation.errors.join('\\n')}`);\n        }\n\n        // Strip TypeScript if needed\n        let processedSource = stripTypes ? stripTypeScript(source) : source;\n\n        // Process dependencies\n        const { processedSource: finalSource, dependencies, missing } = processComponentSource(\n          processedSource\n        );\n\n        // Generate default props if needed\n        const defaultProps = autoGenerateProps\n          ? generateDefaultProps(metadata.props)\n          : {};\n\n        // Update state\n        setState({\n          processedSource: finalSource,\n          componentName,\n          defaultProps,\n          dependencies,\n          missingDependencies: missing,\n          loading: false,\n          error: null,\n          ready: true,\n        });\n      } catch (err) {\n        const error: PreviewError = {\n          message: err instanceof Error ? err.message : String(err),\n          stack: err instanceof Error ? err.stack : undefined,\n        };\n\n        setState({\n          processedSource: null,\n          componentName: null,\n          defaultProps: {},\n          dependencies: [],\n          missingDependencies: [],\n          loading: false,\n          error,\n          ready: false,\n        });\n      }\n    },\n    [metadata, stripTypes, autoGenerateProps]\n  );\n\n  /**\n   * Load component from file path\n   */\n  const loadFromFile = useCallback(async (filePath: string) => {\n    try {\n      // In a real implementation, this would fetch the file\n      // For now, we'll throw an error indicating this needs to be implemented\n      throw new Error(\n        `File loading not implemented. Please provide source code directly via customSource option. File: ${filePath}`\n      );\n    } catch (err) {\n      const error: PreviewError = {\n        message: err instanceof Error ? err.message : String(err),\n      };\n\n      setState({\n        processedSource: null,\n        componentName: null,\n        defaultProps: {},\n        dependencies: [],\n        missingDependencies: [],\n        loading: false,\n        error,\n        ready: false,\n      });\n    }\n  }, []);\n\n  /**\n   * Reload component\n   */\n  const reload = useCallback(() => {\n    if (customSource) {\n      loadComponent(customSource);\n    } else if (metadata.filePath) {\n      loadFromFile(metadata.filePath);\n    } else {\n      setState((prev) => ({\n        ...prev,\n        error: {\n          message: 'No source code or file path provided',\n        },\n        loading: false,\n      }));\n    }\n  }, [customSource, metadata.filePath, loadComponent, loadFromFile]);\n\n  /**\n   * Set custom source code\n   */\n  const setSource = useCallback(\n    (source: string) => {\n      loadComponent(source);\n    },\n    [loadComponent]\n  );\n\n  /**\n   * Initial load\n   */\n  useEffect(() => {\n    reload();\n  }, [reload]);\n\n  return {\n    ...state,\n    reload,\n    setSource,\n  };\n}\n\n/**\n * Simple component loader that just processes source without file loading\n */\nexport function useSimpleComponentLoader(\n  componentName: string,\n  source: string,\n  options: {\n    stripTypes?: boolean;\n    onError?: (error: PreviewError) => void;\n  } = {}\n): {\n  processedSource: string | null;\n  dependencies: string[];\n  missing: string[];\n  loading: boolean;\n  error: PreviewError | null;\n} {\n  const { stripTypes = true, onError } = options;\n  const [state, setState] = useState<{\n    processedSource: string | null;\n    dependencies: string[];\n    missing: string[];\n    loading: boolean;\n    error: PreviewError | null;\n  }>({\n    processedSource: null,\n    dependencies: [],\n    missing: [],\n    loading: true,\n    error: null,\n  });\n\n  useEffect(() => {\n    try {\n      // Validate\n      const validation = validateComponentSource(source, componentName);\n      if (!validation.valid) {\n        throw new Error(validation.errors.join('\\n'));\n      }\n\n      // Strip TypeScript\n      let processed = stripTypes ? stripTypeScript(source) : source;\n\n      // Process dependencies\n      const result = processComponentSource(processed);\n\n      // Extract dependency names\n      const deps = result.dependencies.filter((d) => !d.isRelative).map((d) => d.name);\n\n      setState({\n        processedSource: result.processedSource,\n        dependencies: deps,\n        missing: result.missing,\n        loading: false,\n        error: null,\n      });\n    } catch (err) {\n      const error: PreviewError = {\n        message: err instanceof Error ? err.message : String(err),\n        stack: err instanceof Error ? err.stack : undefined,\n      };\n\n      setState({\n        processedSource: null,\n        dependencies: [],\n        missing: [],\n        loading: false,\n        error,\n      });\n\n      if (onError) {\n        onError(error);\n      }\n    }\n  }, [source, componentName, stripTypes, onError]);\n\n  return state;\n}\n\n/**\n * Check if dependencies are available\n */\nexport function useDependencyCheck(dependencies: string[]): {\n  available: string[];\n  missing: string[];\n  allAvailable: boolean;\n} {\n  const [state, setState] = useState<{\n    available: string[];\n    missing: string[];\n    allAvailable: boolean;\n  }>({\n    available: [],\n    missing: [],\n    allAvailable: false,\n  });\n\n  useEffect(() => {\n    const result = checkDependencies(dependencies);\n    setState({\n      ...result,\n      allAvailable: result.missing.length === 0,\n    });\n  }, [dependencies]);\n\n  return state;\n}\n"],"mappings":"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","names":["jsx","jsxs","useState","useCallback","useCallback","useState","jsx","jsxs","jsx","jsxs","jsx","jsxs","jsx","jsxs","useState","jsx","jsxs","useState","jsx","jsxs","jsx","jsxs","useState","useCallback","jsx","jsxs","useState","useCallback","useState","useEffect","useCallback","useState","useCallback","useEffect"]}